#!/usr/bin/env elvish

use platform

if (eq $platform:os windows) {
  set paths = [
    ~/scoop/apps/llvm/19.1.0/bin
  ]
} elif (eq $platform:os linux) {
  fn clang-format {|@a| e:clang-format-19 $@a }
  set paths = [
    /usr/lib/llvm-19/bin
    # archlinux clang-format is at /usr/bin
    /usr/bin
    $E:HOME/bin
  ]
} else {
  # macOS has already set PATH in .zshrc
}

clang-format --version

clang-format -i tests/**/*.cpp
clang-format -i tests/**/*.hpp
clang-format -i src/**/*.cpp
clang-format -i src/**/*.hpp
clang-format -i moebius/**/*.cpp
clang-format -i moebius/**/*.hpp
clang-format -i 3rdparty/lolly/**/*.cpp
clang-format -i 3rdparty/lolly/**/*.hpp

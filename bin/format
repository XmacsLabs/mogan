#!/usr/bin/env elvish

use platform

if (eq $platform:os windows) {
  set paths = [
    ~/scoop/apps/llvm/16.0.6/bin
  ]
} elif (eq $platform:os linux) {
  set paths = [
    /usr/lib/llvm-16/bin
    # archlinux clang-format is at /usr/bin
    /usr/bin
  ]
} else {
}

clang-format --version

clang-format -i tests/**/*.cpp
clang-format -i tests/**/*.hpp
clang-format -i src/Data/Scheme/**.hpp
clang-format -i src/Data/Scheme/**.cpp
clang-format -i src/Scheme/**.cpp
clang-format -i src/Scheme/**.hpp
clang-format -i src/Graphics/Types/**.cpp
clang-format -i src/Graphics/Types/**.hpp
clang-format -i src/Graphics/Fonts/**.cpp
clang-format -i src/Graphics/Fonts/**.hpp
clang-format -i src/Typeset/Boxes/Graphics/**.cpp
clang-format -i src/Plugins/Freetype/**.cpp
clang-format -i src/Plugins/Freetype/**.hpp
clang-format -i src/Plugins/Ghostscript/**.cpp
clang-format -i src/Plugins/Ghostscript/**.hpp
clang-format -i src/Plugins/Html/*.cpp
clang-format -i src/Plugins/Html/*.hpp
clang-format -i src/Plugins/Metafont/*.cpp
clang-format -i src/Plugins/Metafont/*.hpp
clang-format -i src/Plugins/Pdf/**.cpp
clang-format -i src/Plugins/Pdf/**.hpp
clang-format -i src/Plugins/Qt/**.cpp
clang-format -i src/Plugins/Qt/**.hpp
clang-format -i src/Plugins/Xml/*.cpp
clang-format -i src/Plugins/Xml/*.hpp
clang-format -i src/Mogan/**.cpp
clang-format -i src/Mogan/**.hpp

clang-format -i src/Data/Tree/**.cpp
clang-format -i src/Data/Tree/**.hpp
clang-format -i src/Data/Observers/**.cpp
clang-format -i src/Data/Observers/**.hpp
clang-format -i src/Data/String/unicode.*

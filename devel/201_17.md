# 201_17 增加mathcal, mathbf 和 mathfrak 相关字母的tab cycling快捷键

## 2025/12/19 增加大小写字母的mathbb, mathcal, mathfrak, mathbf, up和bold-up的tab cycling快捷键
### Why
大写字母的tab cycling功能（A A + tab → \mathcal{A}）受到用户欢迎，但小写字母缺乏类似功能。小写字母在数学公式中同样频繁使用，需要提供一致的快捷键体验。同时，现有的tab cycling缺少up（直立）和bold-up（粗直立）字体变体，这些在数学排版中也经常使用。

### How
新增小写字母支持：
1. `a a + tab` 返回 `\mathbb{a}`，其中 `a` 可替换为 a -> z 之间的全部小写字母
2. `a a + tab + tab` 返回 `\mathcal{a}`，其中 `a` 可替换为 a -> z 之间的全部小写字母
3. `a a + tab + tab + tab` 返回 `\mathfrak{a}`，其中 `a` 可替换为 a -> z 之间的全部小写字母
4. `a a + tab + tab + tab + tab` 返回 `\mathbf{a}`，其中 `a` 可替换为 a -> z 之间的全部小写字母
5. `a a + tab + tab + tab + tab + tab` 返回 `\mathrm{a}`（up-a），其中 `a` 可替换为 a -> z 之间的全部小写字母
6. `a a + tab + tab + tab + tab + tab + tab` 返回 `\mathbf{\mathrm{a}}`（bold-up-a），其中 `a` 可替换为 a -> z 之间的全部小写字母

新增大写字母的up和bold-up支持（A已有，补充B-Z）：
1. `A A + tab + tab + tab + tab` 返回 `\mathrm{A}`（up-A）
2. `A A + tab + tab + tab + tab + tab` 返回 `\mathbf{\mathrm{A}}`（bold-up-A）
3. 同样适用于 B -> Z 的所有大写字母

特殊处理：字母I的tab cycling顺序有所不同（因避免与\iint冲突）：
- `I I + tab` → `\mathbb{I}`
- `I I + tab + tab` → `\mathcal{I}`
- `I I + tab + tab + tab` → `\mathfrak{I}`
- `I I + tab + tab + tab + tab` → `\mathbf{I}`
- `I I + tab + tab + tab + tab + tab` → `\mathrm{I}`（up-I）
- `I I + tab + tab + tab + tab + tab + tab` → `\mathbf{\mathrm{I}}`（bold-up-I）

改动点：
1. 在 math-kbd.scm 文件中为所有小写字母a-z添加了六行键盘映射定义（包含up和bold-up）
2. 在 math-kbd.scm 文件中为所有大写字母B-Z补充了up和bold-up的两行键盘映射定义
3. 保持与现有快捷键模式的一致性，遵循相同的tab cycling顺序

## 2025/09/08 修正\mathcal{I} 快捷键和 \iint快捷键冲突

### Why
\mathcal{I} 快捷键和 \iint 快捷键冲突， 均为 `I + I + tab`

改动：
1. `I + I + tab + tab`  返回 `\mathcal{I}`
2. `I + I + tab + tab +tab` 返回 `\mathfrak{I}`
3. `I + I + tab + tab + tab` 返回 `\mathbf{I}`


## 2025/09/05 增加mathcal, mathbf 和 mathfrak 相关字母的tab cycling快捷键
### Why
目前mathcal相关的快捷键非常不符合直觉且对于没有全键盘的用户很不友好, 例如`\mathcal{A}` 需要按 `F7 + shift + a`, `\mathfrak{A}` 需要按 `F8 + shift + a`, `\mathbf{A}` 需要按 `F6 + shift + a`。 

- `\mathcal`这个命令频繁出现在数学分析，线性代数，以及实变函数的教学中。在物理学中花体也被频繁使用，表示作用量
- `\mathfrak`这个命令频繁出现在数论，场论等场合，低年级学生数学分析中学习集合也会用到这个符号。使用频率相对 `\mathcal` 和 `\mathbf` 低，因此放在中间
- `\mathbf`这个命令频繁出现在线性代数(表示矩阵)，动力系统(表示作用量)等科目， 这个的使用频率和 `\mathbb`以及 `\mathcal` 相当，于是给绑定在末尾，这样可以通过 `shift + tab`快速访问


### How
新增：
1. `A + A + tab` 返回 `\mathcal{A}`, 其中 `A` 可替换为 A -> Z 之间的全部大写字母
2. `A + A + tab + tab` 返回 `\mathfrak{A}`, 其中 `A` 可替换为 A -> Z 之间的全部大写字母
3. `A + A + tab + tab + tab` 返回 `\mathbf{A}`, 其中 `A` 可替换为 A -> Z 之间的全部大写字母

改动点：
1. 无，原来的 F6 F7 F8 相关的快捷键依旧保留


# 204_14 优化目录样式

## 如何测试
- 清除缓存 
  - Windows下是先在文件资源管理器里的地址输入框里输入 `%appdata%`，然后删除 `AppData/Roaming/MoganLab` 和 `AppData/Local/MoganLab`。
  - Linux下是删除 `.cache/MoganLab`。
  - macOS下是删除 `~/Library/Caches/MoganLab`。
- 测试文档：Texmacs/tests/tmu/204_14.tmu
  - 更新目录，测试生成的结果中，是否带章的抬头，节的缩进是否正确，点的间距是不是最小，附录的节是否不加进目录
  - 切换语言为英语（美国），看章和附录是否有抬头

## 2025/12/12 微调目录相关宏

## 2025/12/11 将摘要和符号表加进目录
### What
现在，自动生成的目录会带有摘要和符号，摘要环境也进行了优化

## 2025/12/8 section等节环境的修改
### What
- 现在如果 <sectional-short-style> == false，即有chapter时section从1.1开始时，section从不缩进变为缩进1级，subsection从缩进1级变为缩进2级，subsubsection不出现在目录中。
- 修改了`toc-dots`，使得生成的目录里的...和latex基本一致。
- 现在 <sectional-short-style> == false 时 appendix 的 section 不会加进目录

## 2025/12/8 修改目录生成中关于chapter的规则
### What
给chapter和appendix添加抬头，给目录中chapter添加抬头，中文环境下使用 第 x 章。

### Why
目录中chapter前面不带抬头，这是不标准的；chapter和appendix在generic样式下创建时没有抬头，需要补充。

### How
修改 section-base.ts 中的 chapter-toc
`<toc-title|chapter|<arg|name>` -> `<if|<chapter-numbered>|<chapter-text> <the-chapter><chapter-sep><arg|name>`

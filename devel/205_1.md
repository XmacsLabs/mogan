# 205_1

### 如何测试
配置xmake启用mupdf，并编译：
```
xmake f --mupdf=true
xmake build stem
```
目前MuPDF渲染器尚未在核心代码中集成使用，仅能完成编译测试

应用本次更新后，可以无需清理配置缓存，直接运行构建命令即可完成从QT至MuPDF的切换：
```
xmake b stem
# On Windows: xmake i stem 
xmake r stem
```
在程序运行的日志中可以找到如下输出：
```
TeXmacs] debug-std, Use MuPDF render
```
即可说明MuPDF已成功启用

## 2025/08/27 统一MuPDF版本
### What
在Debian 13和Ubuntu 25系统上默认使用apt源的MuPDF，其他系统上使用编译的MuPDF，统一版本号为1.25.1

### Why
统一MuPDF版本

## 2025/08/22 默认启用MuPDF渲染器

### What
顶层xmake配置中默认启用MuPDF，为确保过渡顺利，加入如下语句强制启用，如仍需保留QT渲染器，须将该语句删除：
```
set_config("mupdf", true)
```

### Why
默认启用MuPDF


## 2025/07/07 初步引入MuPDF插件
### What
1. 在项目xmake配置文件中为mupdf新增编译选项，当选项mupdf启用时，将启用全局宏`USE_MUPDF_RENDERER`，同时编译`src/Plugins/MuPDF`下的插件代码
2. 由于xmake官方尚不支持MuPDF依赖，在项目自带的repo中新增MuPDF包的xmake配置文件
3. 引入原版mgubi编写的MuPDF插件代码，[源地址](https://github.com/texmacs/texmacs/tree/tau/src/Plugins/MuPDF)
4. 修改插件代码中的部分API调用以适配MuPDF、Mogan的版本更新，确保编译通过

### Why
集成MuPDF渲染器
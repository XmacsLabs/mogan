# 200_37 实现调试器启动功能

## 如何使用

**启动调试器：**
```bash
DEBUG=1 xmake run stem
```
或
```bash
XMAKE_DEBUGGER=1 xmake run stem
```

**正常启动程序：**
```bash
xmake run stem
```

## 2025/11/27
### What
为xmake添加了调试器启动功能，支持通过环境变量启动调试器。

### Why
开发过程中需要方便地启动调试器进行代码调试，之前xmake run命令不支持直接启动调试器。

### How
在xmake.lua的stem目标on_run函数中实现了调试器启动功能：

1. **环境变量控制**：
   - 设置 `XMAKE_DEBUGGER=1` 或 `DEBUG=1` 启动调试器
   - 命令：`DEBUG=1 xmake run stem`

2. **跨平台调试器支持**：
   - Linux: 自动检测并使用gdb
   - macOS: 自动检测并使用lldb
   - Windows: 自动检测并使用windbg/cdb

3. **智能回退机制**：
   - 如果系统没有安装对应调试器，自动回退到直接运行程序
   - 在非debug模式下运行会显示警告信息

### 技术细节
- 实现位置：`xmake.lua:939-1007`
- 支持多种调试器自动检测
- 保持TEXMACS_PATH环境变量设置
- 提供友好的用户提示信息

### 注意事项
- 建议在debug模式下编译以获得完整的调试符号
- 系统需要安装对应的调试器才能使用调试功能
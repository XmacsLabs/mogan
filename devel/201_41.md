# [201_41] OCR功能

## 如何测试
打开201_41.tmu，进行以下测试项：
+ 点击图片悬浮菜单的 OCR 按钮，查看是否在图片下方插入了一条 **很抱歉，目前OCR功能仅为会员用户提供**
+ 查看日志中的提示 **Image has saved to /tmp/temp-currenttime.png**，其中 currenttime 为图片保存时的时间戳，每人各不相同，以控制台日志输出为准。前往目标目录，查看文件是否存在，以及是否能够正常打开。
+ 在数学模式下使用选择性粘贴功能，对应快捷键 **Ctrl+Alt+v**，呼出菜单后选择OCR，点击确定，等待5秒后会插入一条 **很抱歉，目前OCR功能仅为会员用户提供**
+ 使用智能粘贴功能，对应快捷键 **Ctrl+Shift+v**，确保剪贴板最新的内容是一张图片，按下快捷键，等待5秒后会插入一条 **很抱歉，目前OCR功能仅为会员用户提供**
+ 使用 **插入图片** 与 **粘贴图片** 以外的方式，即除了 **Ctrl+Alt+v** 粘贴图片以及 **插入->图片->插入图片** 以外的任何方式向编辑器输入一张图片，这里建议的方法是直接将文件夹中的图片拖入 Mogan，这样会插入一个没有经过处理的，能够稳定弹出警告的图片。插入后将鼠标移入移出图片范围，查看控制台是否正常输出 **std-warning**，而不是 **too many arguments...** 

##  2025/12/25 模拟OCR通信流程

### What

+ 商业版编写 demo 文件，跑通 OCR 识别全流程
+ 进行了代码集成的尝试，待后续测试与改进
+ 修改了插入文字的位置，新的插入位置为图片块内部，图片的下方
+ 修复了负责控制图片对齐方式的函数的警告信息输出问题，使用正确的参数个数

## 2025/12/24 模拟OCR识别

### What
编写了一个接口，供选择性粘贴与智能粘贴使用。在智能粘贴处添加逻辑，仅在剪贴板内容为图片时触发 OCR 粘贴。

## 2025/12/23 初步完成OCR前端

### What 
为图片悬浮菜单的 OCR 按钮添加了实际功能。

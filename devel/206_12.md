# Emoji切换到PNG渲染

## 2025/08/28

### 如何测试

206_12.tmu

### What

基于206_10的CBDT/CBLC表解析基础，实现从SVG渲染到PNG渲染的切换

### How

1. 修改了`tt_face.cpp`，将SVG表解析改为CBDT表解析
2. 更新了`qt_renderer`，从`svg_string_to_picture`切换到`png_data_to_picture`
3. 完善了字体大小选择逻辑

### Why

CBDT/CBLC表存储的是预渲染的PNG位图数据，相比SVG渲染具有更好的性能。

## 2025/09/03

### What

删除svg有关代码，更改字体名为Mogan-NotoColorEmoji.ttf

## 2025/09/12
### What
1. freetype固定到2.13.3
2. 不使用系统自带的freetype时，开启png选项

### Why
不开启png选项，无法加载emoji字体

## 2025/10/6
### What
在仓库内维护 freetype 的 xmake 构建定义

### Why
1. 避免 pdfhummus 这个依赖引入最新版本的freetype
2. 为后续在仓库内直接引入freetype的源代码做准备

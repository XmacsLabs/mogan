# [202_59] 新增"Total pages"按钮及page-the-total宏

### 如何测试
1. 打开在`文档->页眉页脚`
2. 在右侧页眉页脚栏可以看到底下的`插入`中增添了一个`Total pages`按钮
3. 在`奇数页页脚`or`偶数页页脚`中的默认page-number宏字段后面点击此按钮，会插入一个total-pages宏
4. 编辑格式，例如改为：`第pager-number页，共total-pages页`，按下`确认`按钮
5. 查看页脚是否显示正确
6. 在现有文档末尾插入很多行，使其新增一页，查看页脚中的总页数是否及时更新

## 2025/10/16

### What
需要让`页眉页脚`编辑功能支持插入总页数的宏，实现`第i页，共n页`的效果

### How
在`document-widgets.scm`和`format-tools.scm`中新增一个`Total pages`按钮指向宏`page-the-total`

由于环境中并没有一个获取总页数的宏，只有一个scheme函数`get-page-count`，直接插入这个函数获取的值会在页码变化后失效

故在环境中添加新宏`page-the-total`，模仿`page-nr`和`page-the-page`宏的实现
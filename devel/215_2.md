# [215_2] 增加了在绘制图形的功能中，单击提交图形的功能

## 如何测试

在文本模式下，点击“插入图片 -> 绘制图形”

在画布内绘制如下图形进行测试：

一、固定点数的图形

1. 圆形：2 点（圆心和圆上一点）
2. 椭圆：3 点（两个焦点和椭圆上一点）
3. 圆弧：3 点（圆心和圆弧上两点）

预期行为：

- 插入数量合适的点之后，图形自动提交。
- 按 Shift + 左键 可以撤回此前插入的点。在多次的插入和撤回之间，图形自动提交的功能仍然保持符合预期，不会在点数不够的情况下进行图形的提交。

二、点数不固定的图形

1. 折线
2. 多边形
3. 曲线
4. 闭合曲线

预期行为：

- 需要双击提交图形。不会在绘制过程中提交图形。

三、直接插入的图形

1. 点

预期行为：

- 插入点之后，立刻得到一个点。

并且对于插入的图形进行如下测试：

- 拖拽图形，查看是否行为正确。
- 对于曲线、闭合曲线，在曲线的中间插入额外的采样点，并且进行拖拽，查看行为是否正确。
- 对于折线、多边形，拖拽图形的顶点，查看行为是否正确。

## 实现说明

通过在 `new-gr-tags` （文件： `TeXmacs/progs/graphics/graphics-single.scm`）中添加固定点数的图形，让绘图程序能够区分固定点数和点数不固定的图形。

## 2026/01/27 [215_2] 增加了在绘制图形的功能中，单击提交图形的功能
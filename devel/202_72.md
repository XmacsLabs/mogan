# 202_72 允许二进制插件自定义路径

## 如何测试
### 测试项1
打开Mogan，点击 **插入->会话->手动设置路径** ，检查下列测试项：

+ 是否能够正确弹出窗口
+ 设置一个正确的路径，比如 **/usr/bin/python3** ，查看是否正确弹出需要重启软件的弹窗。
+ 设置一个错误的路径，比如 **/home/master/Desktop/test.txt** ，查看是否弹出路径错误的弹窗。
+ 成功设置路径后，点击 **插入->会话->scheme** ，输入 **(get-preference "plugin:binary:name")** ，其中 name 是刚才设置的插件名称，如果是 python 需要换成 python3，如果是 ghostscript 需要换成gs，查看输出是否为刚才自己设置的路径。
+ 查看下拉框中的项是否存在错误翻译为中文的现象。
+ 更改插件类型，查看文本框中的路径是否跟随变化为对应插件的路径。
+ 为一个插件设置空路径，点击确定，查看是否弹出错误窗口。
+ 打开弹窗，切换至python以外的插件类型，是否设置路径无所谓，点击确定，再次打开弹窗，查看python路径是否正确显示。
+ 语言切换为中文，查看设置成功的提示窗口中的Mogan单词是否拼写正确。

### 测试项2
1. 在Windows平台使用标准路径安装maxima，查看是否能使用maxima插件
2. 将maxima安装的非标准路径，比如D盘，查看是否能够使用`插入->会话->手动设置路径`搞定maxima插件的加载

## 2025/12/04 修改错误的 Mogan 拼写

### What

设置成功的提示信息的汉语翻译存在拼写错误，Mogan->Moagn

### How

修改 **./TeXmacs/plugins/lang/dic/en_US/zh_CN.scm** 中的错误翻译。


## 2025/12/01 将 maxima 加入二进制列表

## 2025/11/29 修复 unix-executables 的 define-format 带来的链接无法跳转的问题
### Why
unix-executables的define-format没有任何后缀，会导致[202_57](202_57.md)出问题。

## 2025/11/28 修复切换插件类型后重新打开弹窗不显示默认的python插件路径的问题

### What

打开弹窗，更改插件类型，点击确认设置路径，关闭再次打开弹窗，显示的插件类型是 python，但文本框中是上次设置的另一个插件的路径。

### How

在弹窗关闭前将 binary-type 重新设置为 python。

## 2025/11/28 封装插件名称与插件id的转换逻辑

### What

存在插件名称与其可执行文件名称不对应的情况。

### How

创建一个函数实现名称的转换。

## 2025/11/28 修复设置空路径不弹出错误窗口的问题

### What

若用户设置的路径为空，点击确定不会弹出错误窗口。

### How

删去多余的判断逻辑，路径为空时可以进入错误窗口弹出的判断。

## 2025/11/28 修复文本框无法跟随下拉框选项变化的问题

### What

打开弹窗，选择默认的 python 以外的插件类型时，文本框不会跟随变化为对应插件的路径。

### How

修改 enum 逻辑，使 verbatim 不对其造成影响。

## 2025/11/27 修复了下拉框中的项被错误翻译的问题

### What
下拉框中的 convert 被错误的翻译为转换，它不应该被翻译。

### How
使用 '(verbatim "convert") 包裹即可。

## 2025/11/27 实现了对自定义二进制插件路径的支持

### What
目前 Mogan 只能在特定的某些路径中检测插件，比如 python 与 conda 只能从默认安装目录与环境变量中已配置的目录查找。如果用户没有正确地配置环境变量，而插件又没有被安装在默认路径，Mogan 就无法找到插件，且不会激活插件，影响用户正常使用。

### How
使用 TeXmacs Gui，在 **插入->会话** 菜单中添加了 **手动设置路径...** 子菜单，用户可以在弹窗中设置自己的安装路径。
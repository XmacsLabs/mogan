# Windows平台编译MT/MD不兼容

## 2025/11/16 

### Why

在Windows平台上使用xmake进行编译时，存在运行时库（MT/MD）不兼容的问题。当前需要在每次执行config命令时手动指定`--vs_runtime=MT`参数：

```bash
xmake config --yes -vD -m releasedbg --plat=windows --vs_runtime=MT
```

### What

为了简化配置命令，可以将`--vs_runtime=MT`参数直接添加到项目的`xmake.lua`配置文件中。这样在Windows平台上执行config命令时，系统会自动使用MT运行时，无需手动指定该参数。

### How

1. 打开项目根目录下的`xmake.lua`文件
2. 在项目配置部分（如`set_allowedplats`之后）添加以下代码：

```lua
-- 设置Windows平台的VS运行时为MT
if is_plat("windows") then
    set_runtimes("MT")
end
```

### 如何测试
1. 执行以下命令进行配置：
```bash
xmake config --yes -vD -m releasedbg --plat=windows
xmake build stem
```
查看是否能够正常编译(注意是Windows平台)

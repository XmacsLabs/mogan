# [201_59] 图片支持鼠标缩放

## 如何测试
1. 插入一张图片（ `图片` 按钮下的 `链接图片` 或 `插入图片` 皆可），选中图片（鼠标点击）后，会绘制出八个蓝色的操控点
2. 图片默认居中。鼠标拖动各操纵点，应有相应的伸缩或等比缩放（某些操控点移动时会出现鼠标方向与效果方向相反的情况，这是因为图片位置固定，在word中嵌入模式下图片的缩放也有这种现象）
3. 选择图片左对齐后，测试右边三个操控点功能是否正常（右上方点的移动会反向，受数据模型限制）
4. 选择图片右对齐后，测试左边三个操控点功能是否正常（左上方点的移动会反向，受数据模型限制）

## 2026/1/19
### What
Feat：图片支持鼠标缩放

### How
1. 图片的缩放逻辑在 `format-geometry-edit.scm` 中，目前使用的是cm作图片单位，后面可以考虑使用par
2. 8个操控点的绘制逻辑在 `edit_repaint.cpp` 中，用的是内置渲染器 renderer 而非 QT 控件，走自己的渲染更新与渲染逻辑
3. 对于没有填入参数的图片，拖动时获取参数会有问题，所以在 `qt_utilities.cpp` 和 `mupdf_picture.cpp` 中默认添加 height 的计算，不让其空（width 默认是 "0.8par"，但原实现中 height 默认是 ""）
# [201_46] 非社区版安装后首次或者更新后打开软件，出现引导弹窗

## 如何测试
1. 社区版，不会出现引导弹窗
```
xmake config --is_community=true
xmake b && xmake r stem
```

2. 非社区版，且第一次安装/版本更新时，出现引导弹窗
- 进入非社区版
```
xmake config --is_community=false
xmake b && xmake r stem
```
- 模拟第一次安装/版本更新，清除配置后直接`xmake r stem`
```
rm ~/.local/share/moganlab
```

3. 点击引导弹窗的登陆按钮，进入主界面后自动进入登陆流程

4. 点击引导弹窗的跳过登陆按钮，直接进入主界面

5. 把引导弹窗X掉，不进入主界面

## 2026/01/12 回滚对 init_texmacs.cpp的init_main_paths方法的优化
### What
会导致 macOS 上 focus-parameter-menu-item 处理 boolean 类型时失效

## 2026/01/07 优化引导弹窗启动代码，防止因zh.tmu文件被污染而crash

## 2026/01/04 引导弹窗加入进度条
#### what
1. research.cpp调用show_startup_login_dialog()                                                                         
2. 显示引导弹窗，启动BootstrapTaskExecutor                                                                             
3. 主线程阻塞在QEventLoop中                                                                                            
4. BootstrapTaskExecutor在主线程中分步执行初始化：                                                                     
  - 执行一小段任务 → 更新进度 → 安排下一段执行                                                                        
  - 重复直到初始化完成                                                                                                
5. 初始化完成后启用弹窗按钮                                                                                           
6. 用户点击按钮 → QEventLoop退出 → 主线程继续                                                                          
7. research.cpp调用init_texmacs()（通过g_startup_login_executed防止重复）     

## 2026/01/01 优化src/System/Boot/init_texmacs.cpp的init_main_paths方法

## 2025/12/27 非社区版安装后首次或者更新后打开软件，出现引导弹窗

#### what
1. 弹窗样式：IntelliJ IDEA 风格                                                                                       
2. 显示时机：首次安装或版本更新时（基于 install_status）                                                              
3. 功能选项：登录按钮（触发现有 OAuth 流程）和跳过按钮（直接进入主界面）                                              
4. 集成位置：Qt应用程序初始化后立即显示，在 init_texmacs() 和 TeXmacs_main() 之前
# 211_3 get_user_name简化到返回USERNAME环境变量的值
## 2025/10/10
### Why
在 Windows 的老版本中，可以通过下面的代码获得用户名。
``` python
import ctypes
 
def get_data(EXTENDED_NAME_FORMAT: int):
    GetUserNameEx = ctypes.windll.secur32.GetUserNameExW
    data = EXTENDED_NAME_FORMAT
 
    size = ctypes.pointer(ctypes.c_ulong(0))
    GetUserNameEx(data, None, size)
 
    nameBuffer = ctypes.create_unicode_buffer(size.contents.value)
    GetUserNameEx(data, nameBuffer, size)
    return nameBuffer.value

print("NameUnknown            : ", get_data(0))
print("NameFullyQualifiedDN   : ", get_data(1))
print("NameSamCompatible      : ", get_data(2))
print("NameDisplay            : ", get_data(3))
print("NameUniqueId           : ", get_data(6))
print("NameCanonical          : ", get_data(7))
print("NameUserPrincipal      : ", get_data(8))
print("NameCanonicalEx        : ", get_data(9))
print("NameServicePrincipal   : ", get_data(10))
print("NameDnsDomain          : ", get_data(12))
```
但是在Windows 11中，无法做到。

所以，我们不如直接返回 USERNAME 这个环境变量的值，简化实现。

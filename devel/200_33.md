# [200_33] 登陆按钮实现

## 涉及文件
- TeXmacs/plugins/account/progs/liii/account.scm
- src/Plugins/Qt/QTMOAuth.cpp

## Oauth2功能测试
1. 插入 Scheme 会话
2. 在 Scheme 会话中运行 `(login)`
3. 缓存目录查看缓存文件，例如：~/.cache/MoganLab/2025.2.0-alpha2/account/token.scm


## 2025/11/11 Oauth2回调token缓存优化
### What
- Oauth2登陆流程回调的token保存至缓存文件
- 实现解耦，方便其他操作（比如登陆按钮）获取缓存的token

### How
1. account.scm 新增token操作方法，实现token缓存的多样化操作
2. QTMOAuth回调处调用scheme方法进行token保存

## 2025/11/06 清理无用代码

## 2025/11/05 新增 qtnetworkauth 模块，初步实现登录流程
###  What
1. 新增Qt NetworkAuth模块
2. 可以通过Scheme代码触发登录，并在终端中看到日志

### How
需要通过如下方法删除一下Qt的缓存：
``` bash
> xmake config --yes -vD
configure
{
    qt_sdkver = 6.8.3
    kind = static
    buildir = build
    mupdf = true
    windows_system_borders = false
    arch = x86_64
    ccache = true
    host = linux
    qt = /home/da/.xmake/packages/q/qt6base/6.8.3/7c1ea54729db483fa6eee7744bd4a333
    style_agent = false
    plat = linux
    mode = release
    ndk_stdcxx = true
}
> rm -rf ~/.xmake/packages/q/
> rm -rf .xmake
> xmake config --yes -vD
```
<TMU|<tuple|1.1.0|2026.1.1>>

<style|<tuple|generic|chinese|table-captions-above|number-europe|preview-ref>>

<\body>
  查询函数

  <\session|scheme|default>
    <\folded-io|Scheme] >
      (get-kbd-bindings "space")
    <|folded-io>
      ((((inside? 'hybrid)) (hybrid-kbd-space) "") (() (kbd-space) ""))
    </folded-io>

    <\folded-io|Scheme] >
      (get-kbd-bindings "backspace")
    <|folded-io>
      ((((and (in-graphics?) (== (get-env "preamble") "false"))) (graphics-kbd-remove #f) "") (() (kbd-backspace) ""))
    </folded-io>

    <\folded-io|Scheme] >
      (get-kbd-bindings "return")
    <|folded-io>
      ((((inside-replace-buffer?)) (replace-one (window-\<gtr\>buffer (auxiliary-buffer-\<gtr\>window (replace-buffer))) (replace-buffer)) "") (((inside-search-or-replace-buffer?)) (search-rotate-match #t) "") (((and (in-graphics?) (== (get-env "preamble") "false"))) (graphics-apply-props-at-mouse) "") (() (kbd-return) ""))
    </folded-io>

    <\folded-io|Scheme] >
      (get-kbd-bindings "C-1")
    <|folded-io>
      ((((inside-search-or-replace-buffer?)) (insert '(wildcard "x")) "") (((and (inside-version?) (with-versioning-tool?))) (version-retain 0) "") (() (switch-to-view-index 0) ""))
    </folded-io>

    <\folded-io|Scheme] >
      (get-kbd-bindings "C-2")
    <|folded-io>
      ((((inside-search-or-replace-buffer?)) (insert '(wildcard "y")) "") (((and (inside-version?) (with-versioning-tool?))) (version-retain 1) "") (((and (in-graphics?) (== (get-env "preamble") "false"))) (graphics-set-grid-aspect 'detailed 2 #t) "") (() (switch-to-view-index 1) ""))
    </folded-io>

    <\folded-io|Scheme] >
      (get-bindings-by-condition '((inside? 'hybrid)))
    <|folded-io>
      (("_ tab" "_") ("^ tab" "^") ("space" (hybrid-kbd-space)) ("}" (hybrid-kbd-curly-right)) ("{" (hybrid-kbd-curly-left)) ("_" (hybrid-kbd-sub)) ("^" (hybrid-kbd-sup)) ("\\\\" (hybrid-kbd-backslash)))
    </folded-io>

    <\folded-io|Scheme] >
      (get-bindings-by-condition '((inside-replace-buffer?)))
    <|folded-io>
      (("C-return" (replace-all (window-\<gtr\>buffer (auxiliary-buffer-\<gtr\>window (replace-buffer))) (replace-buffer))) ("return" (replace-one (window-\<gtr\>buffer (auxiliary-buffer-\<gtr\>window (replace-buffer))) (replace-buffer))))
    </folded-io>

    <\folded-io|Scheme] >
      (get-bindings-by-command '(hybrid-kbd-space))
    <|folded-io>
      (("space" ((inside? 'hybrid))))
    </folded-io>

    <\folded-io|Scheme] >
      (get-bindings-by-command '(kbd-copy))
    <|folded-io>
      (("C-insert" ()) ("F16" ()) ("C-c" ()))
    </folded-io>

    <\input|Scheme] >
      \;
    </input>
  </session>

  \;

  如下两个函数可以查询快捷键"C-c"和"C-v"在全局条件下是否有设置对应操作函数，若有则返回对应的操作函数，若无则返回#f，，之后的操作都可以在这里验证

  <\session|scheme|default>
    <\folded-io|Scheme] >
      (kbd-conflict-query '() "C-c")
    <|folded-io>
      (kbd-copy)
    </folded-io>

    <\folded-io|Scheme] >
      (kbd-conflict-query '() "C-v")
    <|folded-io>
      (kbd-paste)
    </folded-io>

    <\input|Scheme] >
      \;
    </input>
  </session>

  通过如下操作可以将"C-c"和复制解绑,测试ctrl+c对应的复制还能不能生效

  <\session|scheme|default>
    <\input|Scheme] >
      (kbd-execute-edit '() '(kbd-copy) "C-c" "")
    </input>

    <\input| >
      \;
    </input>
  </session>

  通过如下操作可以将"C-c"与复制绑定回来,测试ctrl+c对应的复制还能不能生效

  <\session|scheme|default>
    <\folded-io|Scheme] >
      (kbd-execute-edit '() '(kbd-copy) "" "C-c")
    <|folded-io>
      ("C-c")
    </folded-io>

    <\input|Scheme] >
      \;
    </input>
  </session>

  \;

  通过如下操作可以将复制与粘贴的快捷键进行切换，执行完成之后进行测试

  <\session|scheme|default>
    <\folded-io|Scheme] >
      (kbd-execute-edit '() '(kbd-copy) "C-c" "C-v")
    <|folded-io>
      ("C-v")
    </folded-io>

    <\folded-io|Scheme] >
      (kbd-execute-edit '() '(kbd-paste) "C-v" "C-c")
    <|folded-io>
      ("C-c")
    </folded-io>

    <\input|Scheme] >
      \;
    </input>
  </session>

  \;

  再换回来

  <\session|scheme|default>
    <\folded-io|Scheme] >
      (kbd-execute-edit '() '(kbd-copy) "C-v" "C-c")
    <|folded-io>
      ("C-c")
    </folded-io>

    <\folded-io|Scheme] >
      (kbd-execute-edit '() '(kbd-paste) "C-c" "C-v")
    <|folded-io>
      ("C-v")
    </folded-io>

    <\input|Scheme] >
      \;
    </input>
  </session>

  \;
</body>

<\initial>
  <\collection>
    <associate|page-medium|paper>
    <associate|page-screen-margin|false>
  </collection>
</initial>
